<script>
	function start4x() {
		const inputPreview = document.getElementById("input-preview")
		// validate the preview.src is valid base64
		const base64Regex = /^data:image\/(?:jpeg|png|webp);base64/
		if (!base64Regex.test(inputPreview.src)) {
			// showMessage("Please select an image first.", "error")
			return
		}
		ahk.anime4x(inputPreview.src)
		window.setMainState("processing")
	}
	function reset() {
		window.setMainState("idle")
	}
	function mainBtnClick() {
		switch (window.getState()) {
			case "ready":
				start4x()
				break;
			case "done":
				reset()
				break;
		}
	}
</script>
<div
	id="user-input"
	class="flex-none flex flex-col gap-2 w-full items-center pb-4"
>
	<button
		id="start-btn"
		class="btn btn-primary btn-md btn-disabled px-4 w-1/2"
		data-i18n="start"
		onclick="mainBtnClick()"
	></button>
	<label class="label">
		<input
			type="checkbox"
			checked="checked"
			class="checkbox hover:border-primary checked:bg-primary"
		/>
		<span data-i18n="keepres"></span>
	</label>
</div>
